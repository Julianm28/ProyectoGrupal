
<!DOCTYPE html>
<html lang="es">
<head><meta charset="utf-8"/><title>Fraude - CCSS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="CSS/estilos.css"></head>
<body>
  <div id="nav-placeholder"></div>
  <div class="container-compact">
    <div class="card p-4 mt-4">
      <h3 class="page-title">Detección de fraudes</h3>
      <div id="fraud-wrap"></div>
    </div>
  </div>
  <script src="js/api.js"></script>
  <script>
    fetch('partials/navbar.html').then(r=>r.text()).then(t=>document.getElementById('nav-placeholder').innerHTML=t);
    (async()=> {
      try {
        const data = await apiFetch('/analytics/fraudes');
        document.getElementById('fraud-wrap').innerHTML = data.length ? data.map(f=>`<div class="card p-2 mb-2"><b>${f.hospital}</b> - ${f.insumo} - score:${f.score}</div>`).join('') : '<div class="alert alert-info">No se detectaron patrones anómalos</div>';
      } catch (err) { document.getElementById('fraud-wrap').innerHTML = '<div class="alert alert-danger">Error</div>'; }
    })();
  </script>
</body>
</html>
