<!-- FrontEnd/reportes.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Reportes - CCSS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="CSS/estilos.css">
</head>
<body>
  <div id="nav-placeholder"></div>
  <div class="container-compact">
    <div class="card p-4 mt-4">
      <h3 class="page-title">Reportes</h3>
      <div class="d-flex gap-2 flex-wrap">
        <a class="btn btn-primary" href="#" id="btn-xlsx">Exportar insumos (XLSX)</a>
        <a class="btn btn-primary" href="#" id="btn-csv">Exportar solicitudes (CSV)</a>
        <a class="btn btn-primary" href="#" id="btn-pdf">Exportar solicitudes (PDF)</a>
      </div>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script>
    fetch('partials/navbar.html').then(r=>r.text()).then(t=>document.getElementById('nav-placeholder').innerHTML=t);

    // Simple download helper
    async function download(path, filename) {
      try {
        const blob = await apiFetch(path);
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = filename;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      } catch (err) { alert(err.message || 'Error'); }
    }

    document.getElementById('btn-xlsx').addEventListener('click', (e)=>{ e.preventDefault(); download('/reportes/insumos/xlsx','insumos.xlsx'); });
    document.getElementById('btn-csv').addEventListener('click', (e)=>{ e.preventDefault(); download('/reportes/solicitudes/csv','solicitudes.csv'); });
    document.getElementById('btn-pdf').addEventListener('click', (e)=>{ e.preventDefault(); download('/reportes/solicitudes/pdf','solicitudes.pdf'); });
  </script>
</body>
</html>
